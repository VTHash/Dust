import{U as F,V as l,X as z,Y as A,Z as y,_ as H,$ as I,a0 as k,a1 as p,a2 as v,a3 as c,a4 as m,a5 as O,a6 as W,a7 as j,a8 as B,a9 as C,aa as R,ab as V,ac as w}from"./index-DYy2l7fi.js";const x="/docs/contract/encodeFunctionData";function J(t){const{abi:e,args:n,functionName:s}=t;let a=e[0];if(s){const r=F({abi:e,args:n,name:s});if(!r)throw new l(s,{docsPath:x});a=r}if(a.type!=="function")throw new l(void 0,{docsPath:x});return{abi:[a],functionName:z(A(a))}}function nt(t){const{args:e}=t,{abi:n,functionName:s}=t.abi.length===1&&t.functionName?.startsWith("0x")?t:J(t),a=n[0],r=s,i="inputs"in a&&a.inputs?y(a.inputs,e??[]):void 0;return H([r,i??"0x"])}const U=`Ethereum Signed Message:
`;function X(t){const e=typeof t=="string"?I(t):typeof t.raw=="string"?t.raw:k(t.raw),n=I(`${U}${p(e)}`);return v([n,e])}function at(t,e){return c(X(t),e)}class Y extends m{constructor({domain:e}){super(`Invalid domain "${O(e)}".`,{metaMessages:["Must be a valid EIP-712 domain."]})}}class Z extends m{constructor({primaryType:e,types:n}){super(`Invalid primary type \`${e}\` must be one of \`${JSON.stringify(Object.keys(n))}\`.`,{docsPath:"/api/glossary/Errors#typeddatainvalidprimarytypeerror",metaMessages:["Check that the primary type is a key in `types`."]})}}class _ extends m{constructor({type:e}){super(`Struct type "${e}" is invalid.`,{metaMessages:["Struct type must not be a Solidity type."],name:"InvalidStructTypeError"})}}function q(t){const{domain:e,message:n,primaryType:s,types:a}=t,r=(i,u)=>{for(const S of i){const{name:M,type:d}=S,o=u[M],h=d.match(W);if(h&&(typeof o=="number"||typeof o=="bigint")){const[$,f,N]=h;j(o,{signed:f==="int",size:Number.parseInt(N,10)/8})}if(d==="address"&&typeof o=="string"&&!B(o))throw new C({address:o});const b=d.match(R);if(b){const[$,f]=b;if(f&&p(o)!==Number.parseInt(f,10))throw new V({expectedSize:Number.parseInt(f,10),givenSize:p(o)})}const g=a[d];g&&(K(d),r(g,o))}};if(a.EIP712Domain&&e){if(typeof e!="object")throw new Y({domain:e});r(a.EIP712Domain,e)}if(s!=="EIP712Domain")if(a[s])r(a[s],n);else throw new Z({primaryType:s,types:a})}function G({domain:t}){return[typeof t?.name=="string"&&{name:"name",type:"string"},t?.version&&{name:"version",type:"string"},(typeof t?.chainId=="number"||typeof t?.chainId=="bigint")&&{name:"chainId",type:"uint256"},t?.verifyingContract&&{name:"verifyingContract",type:"address"},t?.salt&&{name:"salt",type:"bytes32"}].filter(Boolean)}function K(t){if(t==="address"||t==="bool"||t==="string"||t.startsWith("bytes")||t.startsWith("uint")||t.startsWith("int"))throw new _({type:t})}function st(t){const{domain:e={},message:n,primaryType:s}=t,a={EIP712Domain:G({domain:e}),...t.types};q({domain:e,message:n,primaryType:s,types:a});const r=["0x1901"];return e&&r.push(L({domain:e,types:a})),s!=="EIP712Domain"&&r.push(E({data:n,primaryType:s,types:a})),c(v(r))}function L({domain:t,types:e}){return E({data:t,primaryType:"EIP712Domain",types:e})}function E({data:t,primaryType:e,types:n}){const s=T({data:t,primaryType:e,types:n});return c(s)}function T({data:t,primaryType:e,types:n}){const s=[{type:"bytes32"}],a=[Q({primaryType:e,types:n})];for(const r of n[e]){const[i,u]=P({types:n,name:r.name,type:r.type,value:t[r.name]});s.push(i),a.push(u)}return y(s,a)}function Q({primaryType:t,types:e}){const n=w(tt({primaryType:t,types:e}));return c(n)}function tt({primaryType:t,types:e}){let n="";const s=D({primaryType:t,types:e});s.delete(t);const a=[t,...Array.from(s).sort()];for(const r of a)n+=`${r}(${e[r].map(({name:i,type:u})=>`${u} ${i}`).join(",")})`;return n}function D({primaryType:t,types:e},n=new Set){const a=t.match(/^\w*/u)?.[0];if(n.has(a)||e[a]===void 0)return n;n.add(a);for(const r of e[a])D({primaryType:r.type,types:e},n);return n}function P({types:t,name:e,type:n,value:s}){if(t[n]!==void 0)return[{type:"bytes32"},c(T({data:s,primaryType:n,types:t}))];if(n==="bytes")return[{type:"bytes32"},c(s)];if(n==="string")return[{type:"bytes32"},c(w(s))];if(n.lastIndexOf("]")===n.length-1){const a=n.slice(0,n.lastIndexOf("[")),r=s.map(i=>P({name:e,type:a,types:t,value:i}));return[{type:"bytes32"},c(y(r.map(([i])=>i),r.map(([,i])=>i)))]}return[{type:n},s]}export{Y as I,st as a,Z as b,_ as c,J as d,nt as e,L as f,E as g,at as h,G as i,U as p,X as t,q as v};
